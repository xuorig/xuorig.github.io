<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title data-react-helmet="true">Navigating and understanding large code bases</title><meta data-react-helmet="true" name="description" content="How to quickly get up and running within a new project or understand an open source library."/><link href="https://fonts.googleapis.com/css?family=Raleway:300,400,700" rel="stylesheet"/><link rel="author" href="https://plus.google.com/103412889445491341044"/><script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB10DGDrJaB7IauMg99tM97DUH9QC4rcO8"></script><style>.me{border-bottom:1px solid #eee;text-align:center;margin-bottom:40px}.me__profile{padding:10px}.me__profile__name{font-weight:700;color:#222;margin-top:10px;margin-bottom:0}.me__profile__desc{font-size:20px;font-weight:200;color:#aaa;margin-top:20px}.me__photo{-webkit-animation:bounce 1s normal;animation:bounce 1s normal;margin-right:20px}.me__photo img{margin:0}.me__photo img:hover{-webkit-animation:bounce 1s infinite;animation:bounce 1s infinite}.me__photo__avatar{display:inline-block;width:110px;height:110px;border-radius:50%}.me__separator{width:60%;border-top:1px solid #eee}.me p a{font-weight:500}.me p{color:#aaa;font-weight:200;margin:0;padding:5px}.me p:last-child{margin-bottom:15px}@-webkit-keyframes bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}@keyframes bounce{0%,20%,53%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1);-webkit-transform:translateZ(0);transform:translateZ(0)}40%,43%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-30px,0);transform:translate3d(0,-30px,0)}70%{-webkit-animation-timing-function:cubic-bezier(.755,.05,.855,.06);animation-timing-function:cubic-bezier(.755,.05,.855,.06);-webkit-transform:translate3d(0,-15px,0);transform:translate3d(0,-15px,0)}90%{-webkit-transform:translate3d(0,-4px,0);transform:translate3d(0,-4px,0)}}.markdown img{width:100%}.markdown h2{margin-top:30px;margin-bottom:30px}.markdown p,li,ul{color:#666;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;font-size:18px;line-height:1.4em;margin-top:20px;margin-bottom:20px}.markdown pre{display:block;background:#3f3f3f;color:#dcdcdc;overflow-y:hidden;margin-top:30px;margin-bottom:30px}.markdown pre code{background:none;border:none;border-radius:3px;display:inline-block;overflow:inherit;padding:25.333px;padding:1.58333rem;white-space:inherit;word-wrap:normal}code{white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px;display:inline;font-family:Inconsolata,monospace,serif;max-width:100%;overflow:auto;padding:0 2.6px;padding:0 .1625rem}.clojure .hljs-attribute,.css .hljs-class,.css .hljs-id,.hljs-keyword,.hljs-request,.hljs-status,.hljs-tag,.lisp .hljs-title,.nginx .hljs-title{color:#e3ceab}.django .hljs-filter .hljs-argument,.django .hljs-template_tag,.django .hljs-variable{color:#dcdcdc}.hljs-date,.hljs-number{color:#8cd0d3}.apache .hljs-sqbracket,.dos .hljs-envvar,.dos .hljs-stream,.hljs-variable{color:#efdcbc}.diff .hljs-change,.dos .hljs-flow,.hljs-literal,.python .exception,.python .hljs-built_in,.tex .hljs-special{color:#efefaf}.diff .hljs-chunk,.hljs-subst{color:#8f8f8f}.apache .hljs-tag,.diff .hljs-header,.dos .hljs-keyword,.haskell .hljs-type,.hljs-prompt,.hljs-title,.nginx .hljs-built_in,.python .hljs-decorator,.ruby .hljs-class .hljs-parent,.tex .hljs-command{color:#efef8f}.dos .hljs-winutils,.ruby .hljs-string,.ruby .hljs-symbol,.ruby .hljs-symbol .hljs-string{color:#dca3a3}.apache .hljs-cbracket,.coffeescript .hljs-attribute,.css .hljs-rules .hljs-value,.diff .hljs-deletion,.hljs-attr_selector,.hljs-built_in,.hljs-javadoc,.hljs-pragma,.hljs-preprocessor,.hljs-pseudo,.hljs-string,.hljs-tag .hljs-value,.smalltalk .hljs-array,.smalltalk .hljs-class,.smalltalk .hljs-localvars,.sql .hljs-aggregate,.tex .hljs-formula{color:#cc9393}.diff .hljs-addition,.hljs-comment,.hljs-doctype,.hljs-pi,.hljs-shebang,.hljs-template_comment,.java .hljs-annotation{color:#7f9f7f}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .css,.xml .hljs-cdata,.xml .javascript,.xml .vbscript{opacity:.5}p.post__author{font-size:14px;text-align:center;margin:0 auto;margin-bottom:40px;margin-top:20px;color:#aaa}.post__title{text-align:center;font-weight:200;color:#222;margin-top:0}p.post__date{font-size:14px;text-transform:uppercase;color:#aaa;text-align:center;margin:0 auto}body{margin:0;border-top:8px solid #d64292;font-family:Raleway,sans-serif}.wrapper{padding:60px 40px 0;max-width:700px;margin:0 auto}.love{font-weight:200}.load-more,.love{padding-bottom:80px;padding-top:60px;color:#aaa;text-align:center;margin:0 auto}.load-more{font-size:16px;font-weight:500}.load-more button{font-size:16px;font-weight:700;color:#d64292;background:none;border:none;margin:0;padding:0;cursor:pointer}.load-more button:hover{text-decoration:underline}.purple,a{color:#d64292;text-decoration:none}hr{margin-top:40px;margin-bottom:40px;width:80%;border:1px solid #eee}.post-list{padding:10px}.post-list__item{text-decoration:none;display:block;padding-left:20px;border-left:4px solid #aaa;min-height:100px;margin-bottom:80px;transition:all .4s ease-out}.post-list__item-enter{opacity:.01}.post-list__item-enter-active{opacity:1}.post-list__item:last-child{margin-bottom:0}.post-list__item:hover{border-left:4px solid #d64292}.post-list__item__header{margin-top:26px;display:-webkit-box;display:-ms-flexbox;display:flex}.post-list__item__header__title{-webkit-box-flex:4;-ms-flex:4;flex:4;font-size:20px;color:#222;margin-top:0;margin-bottom:8px}.post-list__item__header__date{-webkit-box-flex:1;-ms-flex:1;flex:1;color:#aaa;text-align:right}.post-list__item__desc{color:#aaa;font-size:18px;margin-top:0}.talk-list{max-width:600px;margin:0 auto}.talk-list__talk{border-radius:2px;margin-top:40px;display:-webkit-box;display:-ms-flexbox;display:flex;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);transition:all .3s cubic-bezier(.25,.8,.25,1)}.talk-list__talk:hover{box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22)}.talk-list__talk__map{-webkit-box-flex:1;-ms-flex:1;flex:1}.talk-list__talk__content{padding:20px;-webkit-box-flex:3;-ms-flex:3;flex:3}.talk-list__talk__content p{margin-top:0;margin-bottom:15px}.talk-list__talk__content__name{font-weight:200;font-size:24px}.talk-list__talk__content__name--cancelled{text-decoration:line-through}.cancelled{font-weight:200;font-size:24px;color:red;text-decoration:none}.talk-list__talk__content__event{font-weight:200;color:#222;font-size:18px}.light{color:#aaa}</style></head><body class="landing-page"><div id="react-mount"><div style="max-width:960px;margin-left:auto;margin-right:auto;" data-reactroot="" data-reactid="1" data-react-checksum="554477807"><div class="wrapper markdown" data-reactid="2"><!-- react-empty: 3 --><h1 class="post__title" data-reactid="4">Navigating and understanding large code bases</h1><p class="post__date" data-reactid="5">November 12, 2016</p><p class="post__author" data-reactid="6"><!-- react-text: 7 -->by <!-- /react-text --><a href="/" data-reactid="8">Marc-Andre Giroux</a></p><div data-reactid="9"><p>You’ve just landed your new dream job and you’re given your first issue to fix in a gigantic code base. Or maybe you’re digging into a library to understand what the hell is going on in your app. Sometimes it can feel a bit overwhelming. Where do you start ?</p>
<p>I’m personally kind of addicted to understanding the libraries I use. In the past few months I’ve read a bunch of open source stuff out there but also a lot of code at Shopify, where we have a huge Rails code base. I like to think that I’m getting slightly faster at understanding code and I’ve developed some kind of system for how I approach a complicated piece of code. I thought I’d formalize it in this blog post. Let’s get to it!</p>
<p><em>Disclaimer: These are things that work well for me but everybody learns in a different way, so these tricks might be completely useless for you but maybe they’ll help you!</em></p>
<h2>1. Always Be Writing</h2>
<p>The most important thing for me is to write down what I find and learn. So many times I’ll go through a codebase and think I understand it, only to come back to it 2 weeks later and having to learn things again because I forgot.</p>
<p>I personally use private <a href="https://gist.github.com/">gists</a> for that. My latest example is probably from my dive into RPM, New Relic’s Ruby Client. My notes looked like <a href="https://gist.github.com/xuorig/85c04a97d85e16756338638b9b2db1a3">this</a>.</p>
<p>As you can see hey don’t have to be written down in a nice way. It’s really just for you; to remember and visualize it better.</p>
<h2>2. Find an entry point</h2>
<p>I like to think about a code base like some kind of directed graph. You can often pick a function call and follow it through edges until you can’t continue anymore. But which path should you explore? I like to pick an entry point into that graph that makes sense. Usually, if it’s a library, I would pick the main public API method and follow the path.</p>
<p>For example, when I was diving into <a href="http://mgiroux.me/2016/quick-dive-into-relay-query-fetching/">Relay’s Codebase</a> I picked <code>RelayRenderer</code> as the main entry point and followed along to figure out how Relay was querying a GraphQL endpoint.</p>
<h2>3. Prune branches</h2>
<p>Every time we hit a new Graph “node” which would for example be the body of a method, we usually end up expanding our choice of paths. For example, take this fake method as an example:</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDataFromAPI</span>(<span class="hljs-params">params, apiEndpoint</span>) </span>{
  <span class="hljs-keyword">if</span> (params.something) {
    params = getNewParamsFromParams(params);
  }

  <span class="hljs-keyword">if</span> (validateApiEndpoint(apiEndpoint)){
    queryAPI(params, apiEndpoint);
  } <span class="hljs-keyword">else</span> {
    handleApiEndpointInvalid();
  }
}
</code></pre>
<p>There’s quite a few things happening in this method. Here’s what our graph looks like
for this region.</p>
<pre><code class="language-bash">                       +------------------+
                       |                  |
                       |  getDataFromAPI  |
                       |                  |
                       +--+------+-----+--+
                          |      |     |
                          |      |     |
                          |      |     |
                          |      |     |
                          |      |     |
        +-----------------+      |     +----------------+
        |                        |                      |
        |                        |                      |
        v                        v                      v
getNewParamsFromParams  handleApiEndpointInvalid     queryAPI
</code></pre>
<p>We’ve got 4 choices to explore now.</p>
<ul>
<li><strong>A:</strong> We could try and inspect what <code>getNewParamsFromParams</code> does, and why it’s called when <code>params.something</code> is present.</li>
<li><strong>B:</strong> We could check out what happens when the <code>apiEndpoint</code> is invalid.</li>
<li><strong>C:</strong> We could see what happens in <code>queryAPI</code></li>
<li><strong>D:</strong> Explore all the things!</li>
</ul>
<p>Option D is rarely a good choice for me for a few reasons. First, we just added 3 new paths to explore. The number of nodes to understand just grew by a lot, and we have no way of knowing how deep we’ll have to search before we come back to <code>getDataFromAPI</code>. The second reason I don’t like option D is that not all code paths are important for us, especially on a <em>first read</em>.</p>
<p>In this case, Option C would make the most sense. We have to remember what we were searching for in the first place: How is data fetched from that API. Error handling can be understood after, and edge cases don’t matter a this point. We’re looking a general understanding of the code base.</p>
<p>Coming back to point #1, I always document the path I take by writing the file name I’m exploring, the class I’m in, the method called, and a summary of what is done in there.</p>
<p>To summarize this point: <em>Aggressively try to prune certain paths from your traversal. Avoid expanding in breath, focus on depth first.</em></p>
<p><strong>In reality, what we’re doing is pretty close to a <a href="https://en.wikipedia.org/wiki/Best-first_search">Best-First Search</a>, where the heuristic function is decided by your brain. You have to guess which branch will lead you to your goal of understanding a particular piece of code.</strong></p>
<h2>4. Multiple passes</h2>
<p>In point 3, I suggested you aggressively cut “useless” branches that won’t lead you to what you’re really interested in a method. In reality, I like to do multiple “passes” on a code base. On the first pass, I’ll cut a lot of corners, cut almost all branches except the main one.</p>
<p>On the subsequent passes, I’ll start going into some of those branches. Since   we already have a general understanding of the code base, these branches start to make more sense to us.</p>
<h2>5. Don’t use if you don’t understand</h2>
<p>I’ll admit that point is a bit extreme and even I don’t always follow it 100%. But just trying to follow it can yield awesome results: try to never use a Class, Function, Library, API, without knowing a bit of it’s internals.</p>
<p>In theory, the interface is enough to write great software. But in my experience, for personal development, trying to dive into everything you use helps you learn much faster.</p>
<h2>Bonus: Time</h2>
<p><img src="https://media.giphy.com/media/xTiQywlOn0gKyz0l56/giphy.gif" alt="Time Gif"></p>
<p>Understanding complex code bases has no shortcuts. These tricks help me make sense out of them much faster, but in the end, you really just need to put time aside to really understand what you work on or what you use.</p>
<p>Hope these tricks will help you! If not, please share what has worked for you! As always, you can find me on <a href="https://twitter.com/__xuorig__">Twitter</a> and <a href="http://github.com/xuorig">Github</a>!</p>
</div><p style="text-align:center;font-weight:bold;margin-top:30px;" data-reactid="10"><!-- react-text: 11 -->Go back to <!-- /react-text --><a href="/" data-reactid="12">Recent Posts</a><!-- react-text: 13 --> ✍️<!-- /react-text --></p><hr data-reactid="14"/><div style="margin-bottom:30px;" data-reactid="15"><h6 data-reactid="16">READ THIS NEXT:</h6><h3 data-reactid="17"><a href="/2017/pretty-schema-masking/" data-reactid="18">Schema Masking in GraphQL-Ruby</a></h3><p data-reactid="19">I wrote a little something on an idea that a like to use when doing schema-masking in GraphQL-Ruby.
I posted it on medium and you can check it out right here!
Give it a read and let me know what you...</p></div><section class="disqus" data-reactid="20"><div id="disqus_thread" data-reactid="21"></div><script type="text/javascript" data-reactid="22"></script></section></div><span style="display:block;clear:both;" data-reactid="23"> </span></div></div><script src="/bundle.js?t=1527958889396"></script><script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-69973242-1', 'auto');
            ga('send', 'pageview');
          </script></body></html>